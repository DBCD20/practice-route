<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Storage Practice Using Arrays</title>
    <style>
        ul > li {
            background: white;
            border-radius: 10px;
            border: 4px solid #35B6EC;
            width: 400px;
            list-style: none;
            margin: 0.2em;
            padding: 0.5em;
        }
        ul > li:hover {
            cursor: pointer;
            box-shadow: 0 3px 3px grey, 0 10px 20px lightgrey;
            margin-bottom: 4px;
        }
    </style>
</head>
<body>
    <div>
        <input id="newName" type="text" name="" required>
        <input id="details" type="text" required>
        <input id="number" type="number" required>
        <input id="submit" type="submit">
        <input id="edit" type="submit" value="edit">
    </div>
    <div id="output">
        <ul id="unorderedList"></ul>
    </div>
    <script>
        var newName     = document.querySelector("#newName"),
            details     = document.querySelector("#details"),
            number      = document.querySelector("#number"),
            submit      = document.querySelector("#submit"),
            outputDiv   = document.querySelector("#output"),
            listItem    = document.querySelector("li"),
            list        = document.querySelector("#unorderedList"),
            fragment    = document.createDocumentFragment();

 var toLocalStorage = function(nameOfStorage){
            toStore = JSON.stringify(nameOfStorage);
            localStorage.setItem("information", toStore)
        }
        
        var storage;
        var fromStorage = JSON.parse(window.localStorage.getItem("information"));
        if(fromStorage){
            storage = fromStorage;
        } else {
            storage = [];
        }

        var addInfo = function(){
            if(newName.value && details.value && number.value){
                storage.push({
                            name: newName.value,
                            details: details.value,
                            number: number.value
                        });
            alert("Information successfully added!")
            toLocalStorage(storage);
            displayList();

            } else {alert("Please insert valid details!")}
            
        }
       
        var displayList = function(){
            if(storage){
                for(var i = 0; i < storage.length; i++){
                var li = document.createElement("li");
                    li.innerHTML = "<span>name: </span>" + storage[i].name + "<br />"
                                   + "details: " + storage[i].details + "<br />"
                                   + "number: " + storage[i].number;
                    li.setAttribute("contenteditable", "true");
                    li.addEventListener("click", function(){
                    alert(this.id)})
                    fragment.appendChild(li);
                    
            }
            list.innerHTML = "";
            list.appendChild(fragment);
            } else {alert("Nothing to show here")}
            
        }
        
        // function editData(name){
        //     fromstorage.
        // }
        // listItem.addEventListener("dblclick", function(){
        //     alert(li.textContent)
        // });
        
        window.onload = displayList();
        submit.addEventListener("click", addInfo)
        // function Person(name, details, contact, id){
        //     this.name = name;
        //     this.details = details;
        //     this.contact = contact;
        //     this.index   = id;
        //     this.makeDiv = function(){
        //         var li  = document.createElement("li").setAttribute("id", this.index),
        //             namePar   = document.createElement("p"),
        //             detailsPar = document.createElement("p"),
        //             contactPar = document.createElement("p");
        //             namePar.Textcontent = this.name;
        //             detailsPar.Textcontent = this.details;
        //             contactPar.Textcontent = this.contact;
        //             li.appendChild(namePar, detailsPar, contactPar);
        //             return li
        //     }
        // }

    </script>
</body>
</html>